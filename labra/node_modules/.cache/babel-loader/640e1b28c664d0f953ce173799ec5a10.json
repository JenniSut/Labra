{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jents\\\\OneDrive\\\\Asiakirjat\\\\Kouluhommat\\\\Front end\\\\uusiHarjoitutyo\\\\labra\\\\src\\\\components\\\\Kayttaja.js\",\n    _s = $RefreshSig$();\n\nimport { InputLabel, Paper, OutlinedInput, Button, Grid } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Kayttaja(props) {\n  _s();\n\n  //kayttajatunnus saadaan propsina\n  const [tunnus, setTunnus] = useState({\n    kayttajatunnus: props.kayttis,\n    salasana: ''\n  });\n  const [virhe, setVirhe] = useState(''); //lomakkeelta saatava vanha salasana\n\n  const muutaSalasana = e => {\n    setTunnus({ ...tunnus,\n      salasana: e.target.value\n    });\n  }; //lomakkeelta saatava uusi salasana\n\n\n  const [uusiSalasana, setUusi] = useState('');\n\n  const muutaUusiSalasana = e => {\n    setUusi(e.target.value);\n  }; //lomakkeelta saatava \"salasana uudestaan\", johon verrataan uutta salasanaa\n\n\n  const [vertailuSalasana, setVertailu] = useState('');\n\n  const muutaVertailu = e => {\n    setVertailu(e.target.value);\n  };\n\n  const url = 'http://localhost:8080';\n\n  const muokkaa = async e => {\n    try {\n      const response = await fetch('http://localhost:8080/kanta/kayttikset/one/' + tunnus.kayttajatunnus);\n      const json = await response.json();\n      console.log(json); //verrataan annettua vanhaa salasanaa kantaan tallennettuun\n\n      if (tunnus.salasana === json.salasana) {\n        //verrataan uusia annettuja salasanoja kirjoitusvirheiden varalta\n        if (uusiSalasana === vertailuSalasana) {\n          const formData = {\n            'salasana': uusiSalasana\n          };\n          axios.post(url + '/kanta/kayttikset/edit/' + tunnus.kayttajatunnus, formData).then(response => {\n            console.log(uusiSalasana);\n\n            if (response.status === 200) {\n              setUusi('');\n              setVertailu('');\n              setTunnus({ ...tunnus,\n                salasana: ''\n              });\n              setVirhe('Salasana vaihdettu');\n            } else {\n              setVirhe('Salasanan vaihto ei onnistunut');\n            }\n          });\n        } else {\n          setVirhe('Salasanat eivät täsmää');\n        }\n\n        ;\n      } else {\n        setVirhe('Väärä salasana');\n      }\n    } catch (error) {\n      setVirhe('Kävi odottamaton virhe');\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 0,\n      direction: \"column\",\n      alignItems: \"center\",\n      justify: \"center\",\n      style: {\n        minHeight: '100vh'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      item: true,\n      xs: 3,\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        style: {\n          margin: 10,\n          padding: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          disabled: true,\n          style: {\n            margin: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"K\\xE4ytt\\xE4j\\xE4tunnus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n            value: tunnus.kayttajatunnus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          style: {\n            margin: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Vanha salasana\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n            type: \"password\",\n            value: tunnus.salasana,\n            onChange: e => muutaSalasana(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          style: {\n            margin: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Uusi salasana\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n            type: \"password\",\n            value: uusiSalasana,\n            onChange: e => muutaUusiSalasana(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          style: {\n            margin: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            children: \"Uusi salasana uudestaan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n            type: \"password\",\n            value: vertailuSalasana,\n            onChange: e => muutaVertailu(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          startIcon: /*#__PURE__*/_jsxDEV(DoneAllIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 76\n          }, this),\n          onClick: muokkaa\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), virhe]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Kayttaja, \"KfS/LrO+L/PkIWF2sM52AZQUzc8=\");\n\n_c = Kayttaja;\n;\nexport default Kayttaja;\n\nvar _c;\n\n$RefreshReg$(_c, \"Kayttaja\");","map":{"version":3,"sources":["C:/Users/jents/OneDrive/Asiakirjat/Kouluhommat/Front end/uusiHarjoitutyo/labra/src/components/Kayttaja.js"],"names":["InputLabel","Paper","OutlinedInput","Button","Grid","React","useState","FormControl","DoneAllIcon","axios","Kayttaja","props","tunnus","setTunnus","kayttajatunnus","kayttis","salasana","virhe","setVirhe","muutaSalasana","e","target","value","uusiSalasana","setUusi","muutaUusiSalasana","vertailuSalasana","setVertailu","muutaVertailu","url","muokkaa","response","fetch","json","console","log","formData","post","then","status","error","minHeight","margin","padding"],"mappings":"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","sourcesContent":["import {InputLabel, Paper, OutlinedInput, Button, Grid, } from '@material-ui/core';\r\nimport React, {useState} from 'react';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\r\nimport axios from 'axios';\r\n\r\nfunction Kayttaja(props){\r\n    \r\n    //kayttajatunnus saadaan propsina\r\n    const [tunnus, setTunnus] = useState({\r\n        kayttajatunnus:(props.kayttis),\r\n        salasana:''\r\n    });\r\n    const [virhe, setVirhe] = useState('')\r\n\r\n    //lomakkeelta saatava vanha salasana\r\n    const muutaSalasana = (e) =>{\r\n        setTunnus({\r\n            ...tunnus, salasana:e.target.value,\r\n        })\r\n    };\r\n\r\n    //lomakkeelta saatava uusi salasana\r\n    const [uusiSalasana, setUusi] = useState('');\r\n    const muutaUusiSalasana = (e) => {\r\n        setUusi(e.target.value);\r\n    };\r\n\r\n    //lomakkeelta saatava \"salasana uudestaan\", johon verrataan uutta salasanaa\r\n    const [vertailuSalasana, setVertailu] = useState('');\r\n    const muutaVertailu = (e) => {\r\n        setVertailu(e.target.value);\r\n    }\r\n    const url= 'http://localhost:8080';\r\n\r\n\r\n    const muokkaa = async(e) => {\r\n            try {\r\n                const response = await fetch('http://localhost:8080/kanta/kayttikset/one/' + tunnus.kayttajatunnus);\r\n                const json = await response.json();\r\n                console.log(json);\r\n                //verrataan annettua vanhaa salasanaa kantaan tallennettuun\r\n                if (tunnus.salasana === json.salasana){\r\n                    //verrataan uusia annettuja salasanoja kirjoitusvirheiden varalta\r\n                    if (uusiSalasana === vertailuSalasana){\r\n                        const formData = {\r\n                            'salasana':uusiSalasana,\r\n                        }\r\n                \r\n                        axios.post( url + '/kanta/kayttikset/edit/' + tunnus.kayttajatunnus, formData)\r\n                        .then(response => {\r\n                            console.log(uusiSalasana)\r\n                            if (response.status === 200){\r\n                                setUusi('');\r\n                                setVertailu('');\r\n                                setTunnus({...tunnus, salasana:''});\r\n                                setVirhe('Salasana vaihdettu')\r\n                            }else{\r\n                                setVirhe('Salasanan vaihto ei onnistunut')\r\n                            }\r\n                        })\r\n                    }else {\r\n                        setVirhe('Salasanat eivät täsmää')\r\n                    };\r\n                }else {\r\n                    setVirhe('Väärä salasana')}\r\n             }catch(error){\r\n                setVirhe('Kävi odottamaton virhe')\r\n            };\r\n        };\r\n    \r\n\r\n    return(\r\n        <div>\r\n            <Grid\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n            style={{ minHeight: '100vh' }}\r\n            ></Grid>\r\n            <Grid item xs={3}>\r\n                <form style ={{margin:10, padding:10}}>\r\n                    <FormControl disabled style ={{margin:10}}>\r\n                        <InputLabel>Käyttäjätunnus</InputLabel>\r\n                        <OutlinedInput value={tunnus.kayttajatunnus} />\r\n                    </FormControl>\r\n                    <br/>\r\n                    <FormControl style ={{margin:10}}>\r\n                        <InputLabel>Vanha salasana</InputLabel>\r\n                        <OutlinedInput type='password' value={tunnus.salasana} onChange= {(e) => muutaSalasana(e)}/>\r\n                    </FormControl>\r\n                    <br/>\r\n                    <FormControl style ={{margin:10}}>\r\n                        <InputLabel>Uusi salasana</InputLabel>\r\n                        <OutlinedInput type='password' value={uusiSalasana} onChange= {(e) => muutaUusiSalasana(e)}/>\r\n                    </FormControl>\r\n                    <br/>\r\n                    <FormControl style ={{margin:10}}>\r\n                        <InputLabel>Uusi salasana uudestaan</InputLabel>\r\n                        <OutlinedInput type='password' value={vertailuSalasana} onChange= {(e) => muutaVertailu(e)}/>\r\n                    </FormControl>\r\n                    <br/>\r\n                    <Button variant='contained' color='primary' startIcon={<DoneAllIcon/>} onClick= {muokkaa}></Button>\r\n                </form>\r\n                {virhe}\r\n            </Grid>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Kayttaja;"]},"metadata":{},"sourceType":"module"}